{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { inject } from '@angular/core';\nimport { RouterLink } from '@angular/router';\nimport { ApiService } from '../../../Services/ApiService/api.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"../../../Services/AuthService/auth.service\";\nimport * as i4 from \"@angular/common\";\nfunction AdminComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"div\", 16)(2, \"div\");\n    i0.ɵɵelement(3, \"img\", 17);\n    i0.ɵɵelementStart(4, \"div\", 18)(5, \"h3\", 19);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 20);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\", 21);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\", 22);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\")(14, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function AdminComponent_div_20_Template_button_click_14_listener() {\n      const product_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.editProduct(product_r2.product_id));\n    });\n    i0.ɵɵtext(15, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function AdminComponent_div_20_Template_button_click_16_listener() {\n      const product_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteProduct(product_r2.product_id));\n    });\n    i0.ɵɵtext(17, \"Delete\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const product_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"alt\", product_r2.product_name);\n    i0.ɵɵproperty(\"src\", ctx_r2.getImageUrl(product_r2), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(product_r2.product_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r2.product_Desc);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Price: \", product_r2.product_price, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Stock: \", product_r2.product_stocks, \"\");\n  }\n}\nexport let AdminComponent = /*#__PURE__*/(() => {\n  class AdminComponent {\n    constructor(router, toastr, authService) {\n      this.router = router;\n      this.toastr = toastr;\n      this.authService = authService;\n      this.apiService = inject(ApiService);\n      this.products = [];\n    }\n    ngOnInit() {\n      this.getProduct();\n    }\n    getProduct() {\n      this.apiService.getProducts().subscribe({\n        next: product => {\n          this.products = product;\n        },\n        error: err => {\n          this.toastr.error('Failed to get Product');\n          console.error(\"failed to get product\");\n        }\n      });\n    }\n    editProduct(id) {\n      this.router.navigate(['admin/edit_products/' + `${id}`]);\n    }\n    deleteProduct(product_id) {\n      if (confirm('Are you sure you want to delete this product?')) {\n        this.apiService.deleteProduct(product_id).subscribe({\n          next: () => {\n            this.toastr.success('Product Deleted Successfully');\n            this.getProduct();\n          },\n          error: err => {\n            this.toastr.error(err.error?.message || 'Failed to Delete product');\n            console.error('Failed to delete product', err);\n          }\n        });\n      }\n    }\n    getImageUrl(product) {\n      if (product.image_data) {\n        return `data:${product.image_type};base64,${product.image_data}`;\n      }\n      return 'public/truck.jpg';\n    }\n    logout() {\n      this.authService.logout();\n    }\n    static {\n      this.ɵfac = function AdminComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || AdminComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.AuthService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AdminComponent,\n        selectors: [[\"app-admin\"]],\n        decls: 21,\n        vars: 1,\n        consts: [[1, \"navbar\", \"navbar-expand-lg\", \"bg-warning\"], [1, \"container-fluid\"], [\"href\", \"#\", 1, \"navbar-brand\"], [\"type\", \"button\", \"data-bs-toggle\", \"collapse\", \"data-bs-target\", \"#navbarNav\", \"aria-controls\", \"navbarNav\", \"aria-expanded\", \"false\", \"aria-label\", \"Toggle navigation\", 1, \"navbar-toggler\"], [1, \"navbar-toggler-icon\"], [\"id\", \"navbarNav\", 1, \"collapse\", \"navbar-collapse\"], [1, \"navbar-nav\"], [1, \"nav-item\"], [\"routerLink\", \"/admin/products\", 1, \"nav-link\", \"active\"], [\"routerLink\", \"/admin/create_products\", 1, \"nav-link\", \"text-black\"], [1, \"d-flex\", \"justify-content-end\", \"align-items-end\", \"me-5\"], [1, \"btn\", \"btn-danger\", 2, \"cursor\", \"pointer\", 3, \"click\"], [1, \"container\", \"my-4\"], [1, \"row\"], [\"class\", \"col-3 mb-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-3\", \"mb-3\"], [1, \"card\", 2, \"width\", \"18rem\"], [\"height\", \"288px\", \"width\", \"288px\", 1, \"card-image-top\", 3, \"src\", \"alt\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\", \"text-danger\"], [1, \"card-text\", \"fw-bold\", \"text-primary\"], [1, \"card-text\", \"fw-bold\", \"text-success\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", \"me-3\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", 3, \"click\"]],\n        template: function AdminComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"nav\", 0)(1, \"div\", 1)(2, \"a\", 2);\n            i0.ɵɵtext(3, \"Admin\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"button\", 3);\n            i0.ɵɵelement(5, \"span\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"div\", 5)(7, \"ul\", 6)(8, \"li\", 7)(9, \"a\", 8);\n            i0.ɵɵtext(10, \"Home\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(11, \"li\", 7)(12, \"a\", 9);\n            i0.ɵɵtext(13, \"Add Products\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(14, \"div\", 10)(15, \"a\", 11);\n            i0.ɵɵlistener(\"click\", function AdminComponent_Template_a_click_15_listener() {\n              return ctx.logout();\n            });\n            i0.ɵɵtext(16, \"Logout\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(17, \"section\")(18, \"div\", 12)(19, \"div\", 13);\n            i0.ɵɵtemplate(20, AdminComponent_div_20_Template, 18, 6, \"div\", 14);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(20);\n            i0.ɵɵproperty(\"ngForOf\", ctx.products);\n          }\n        },\n        dependencies: [CommonModule, i4.NgForOf, RouterLink],\n        encapsulation: 2\n      });\n    }\n  }\n  return AdminComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}