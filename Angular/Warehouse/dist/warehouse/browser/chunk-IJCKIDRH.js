import{a as P}from"./chunk-FYVEFPOD.js";import{a as H,b as D,c as Q,d as z,e as J,g as K,h as X,i as Y,j as Z,k as ee,m as te,o as ie,p as M}from"./chunk-5YPTTVOM.js";import{$ as e,H as s,Ia as G,K as u,Ka as T,L as C,La as A,P as m,S as x,T as j,V as O,Va as R,W as c,Xa as N,Y as w,Z as E,_ as o,aa as v,ba as B,ca as p,da as _,ga as n,ha as f,ia as y,ja as U,na as F,oa as k,s as d,v as V,w as $,ya as W,za as L}from"./chunk-S7MPL5EF.js";function le(r,i){if(r&1){let t=B();o(0,"tr")(1,"td"),n(2),e(),o(3,"td"),n(4),e(),o(5,"td"),n(6),e(),o(7,"td"),n(8),e(),o(9,"td")(10,"button",14),p("click",function(){let l=V(t).$implicit,h=_(2);return $(h.editItem(l.id))}),n(11,"Edit"),e(),o(12,"button",15),p("click",function(){let l=V(t).$implicit,h=_(2);return $(h.deleteItem(l.id))}),n(13,"Delete"),e()()()}if(r&2){let t=i.$implicit;s(2),f(t.id),s(2),f(t.product.product_name),s(2),f(t.quantity),s(2),f(t.location)}}function me(r,i){r&1&&(o(0,"div",12)(1,"table",13)(2,"thead")(3,"tr")(4,"th"),n(5,"ID"),e(),o(6,"th"),n(7,"Product"),e(),o(8,"th"),n(9,"Quantity"),e(),o(10,"th"),n(11,"Location"),e(),o(12,"th"),n(13,"Actions"),e()()(),o(14,"tbody"),w(15,le,14,4,"tr",null,O().trackById,!0),e()()()),r&2&&(s(15),E(i))}function de(r,i){r&1&&v(0,"app-spinner")}var q=class r{constructor(i,t){this.toastr=i;this.router=t}apiService=d(P);authService=d(N);warehouseItems=this.apiService.getWarehouseItems();editItem(i){this.router.navigate([`warehouse/edit_items/${i}`])}deleteItem(i){confirm("Are you sure you want to delete this warehouse item?")&&this.apiService.deleteWarehouse(i).subscribe({next:()=>{this.warehouseItems=this.apiService.getWarehouseItems(),this.toastr.success("Item deleted successfully")},error:t=>{this.toastr.error(t.error?.message||"Failed to delete item")}})}trackById(i,t){return t.id??i}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||r)(u(R),u(T))};static \u0275cmp=C({type:r,selectors:[["app-warehouse-list"]],decls:24,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container"],["routerLink","/",1,"navbar-brand"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","/warehouse/items",1,"nav-link","active"],["routerLink","/warehouse/add_items",1,"nav-link","text-white"],["id","navbar-item",1,"navbar-nav"],[1,"nav-link","btn-primary","btn",3,"click"],[1,"container","mt-4"],["type","button","routerLink","/warehouse/add_items",1,"btn","btn-primary","mb-3"],[1,"table-responsive"],[1,"table","table-striped"],["type","button",1,"btn","btn-sm","btn-info","me-2",3,"click"],["type","button",1,"btn","btn-sm","btn-danger",3,"click"]],template:function(t,a){if(t&1&&(o(0,"nav",0)(1,"div",1)(2,"a",2),n(3,"Inventory Management"),e(),o(4,"div",3)(5,"ul",4)(6,"li",5)(7,"a",6),n(8,"Home"),e()(),o(9,"li",5)(10,"a",7),n(11,"Add Items"),e()()()(),o(12,"ul",8)(13,"li",5)(14,"a",9),p("click",function(){return a.logout()}),n(15,"Logout"),e()()()()(),o(16,"div",10)(17,"h2"),n(18,"Warehouse Inventory"),e(),o(19,"button",11),n(20,"Add New Item"),e(),m(21,me,17,0,"div",12),F(22,"async"),m(23,de,1,0,"app-spinner"),e()),t&2){let l;s(21),c((l=k(22,1,a.warehouseItems))?21:23,l)}},dependencies:[L,W,A,M],encapsulation:2})};var ue=(r,i)=>i.product_id;function ce(r,i){if(r&1&&(o(0,"option",21),n(1),e()),r&2){let t=i.$implicit;x("value",t.product_id),s(),U("",t.product_name," -Stock: ",t.product_stocks,"")}}function pe(r,i){r&1&&w(0,ce,2,3,"option",21,ue),r&2&&E(i)}function he(r,i){r&1&&(o(0,"div",16),n(1,"Product is Required"),e())}function ve(r,i){r&1&&(o(0,"div",16),n(1,"Location is Required"),e())}function _e(r,i){r&1&&v(0,"app-spinner")}function fe(r,i){if(r&1&&n(0),r&2){let t=_();y(" ",t.isEdit?"Update":"Save"," Item ")}}var b=class r{constructor(i,t,a){this.route=i;this.router=t;this.toastr=a}fb=d(te);apiService=d(P);authService=d(N);warehouseForm=this.fb.group({product_id:[0,D.required],quantity:[0,D.required],location:["",D.required]});isEdit=!1;Id;products$=this.apiService.getProducts();isLoading=!1;ngOnInit(){this.route.params.subscribe(i=>{i.id&&(this.isEdit=!0,this.Id=+i.id,this.loadWarehouseItem(this.Id))})}loadWarehouseItem(i){this.isLoading=!0,this.apiService.getWarehouseItemsId(i).subscribe({next:t=>{this.warehouseForm.patchValue({product_id:t.product?.product_id,quantity:t.product?.product_stocks,location:t.location}),this.isLoading=!1},error:t=>{this.toastr.error(t.error?.message||"Failed to load item"),this.isLoading=!1}})}onSubmit(){this.isLoading=!0;let i=this.warehouseForm.value;if(this.apiService.getProductId(i.product_id).subscribe({next:t=>{let a={product:t,quantity:i.quantity??0,location:i.location??""};this.isEdit&&this.Id?this.apiService.updateWarehouse(this.Id,a).subscribe({next:()=>{this.toastr.success("Item Updated Successfully"),this.router.navigate(["warehouse/items"])},error:l=>{this.toastr.error(l.error?.message||"Update Failed"),this.isLoading=!1}}):this.apiService.createWarehouse(a).subscribe({next:()=>{this.toastr.success("Item Created Successfully"),this.router.navigate(["warehouse/items"])},error:l=>{this.toastr.error(l.error?.message||"Failed to create item"),this.isLoading=!1}})}}),this.warehouseForm.invalid){console.log("Invalid Data");return}}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||r)(u(G),u(T),u(R))};static \u0275cmp=C({type:r,selectors:[["app-warehouse-form"]],decls:41,vars:14,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container"],["routerLink","/",1,"navbar-brand"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","/warehouse/items",1,"nav-link","active"],["routerLink","/warehouse/items",1,"nav-link","text-white"],["id","navbar-item",1,"navbar-nav"],[1,"nav-link","btn-primary","btn",3,"click"],[1,"container","mt-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","product_id",1,"form-label"],["formControlName","product_id","id","product_id",1,"form-select"],["value",""],[1,"text-danger"],["for","location",1,"form-label"],["type","text","formControlName","location","id","location",1,"form-control"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],["type","button","routerLink","/warehouse/items",1,"btn","btn-danger"],[3,"value"]],template:function(t,a){if(t&1&&(o(0,"nav",0)(1,"div",1)(2,"a",2),n(3,"Inventory Management"),e(),o(4,"div",3)(5,"ul",4)(6,"li",5)(7,"a",6),n(8,"Home"),e()(),o(9,"li",5)(10,"a",7),n(11,"Items"),e()()()(),o(12,"ul",8)(13,"li",5)(14,"a",9),p("click",function(){return a.logout()}),n(15,"Logout"),e()()()()(),o(16,"div",10)(17,"p"),n(18),e(),o(19,"h2"),n(20),e(),o(21,"form",11),p("ngSubmit",function(){return a.onSubmit()}),o(22,"div",12)(23,"label",13),n(24,"Product"),e(),o(25,"select",14)(26,"option",15),n(27,"Select a product"),e(),m(28,pe,2,0),F(29,"async"),e(),m(30,he,2,0,"div",16),e(),o(31,"div",12)(32,"label",17),n(33,"Location"),e(),v(34,"input",18),m(35,ve,2,0,"div",16),e(),o(36,"button",19),m(37,_e,1,0,"app-spinner")(38,fe,1,1),e(),o(39,"button",20),n(40,"Cancel"),e()()()),t&2){let l,h,S,g,I;s(18),y("",a.Id,"-ware"),s(2),y("",a.isEdit?"Edit":"Add"," Warehouse Item"),s(),x("formGroup",a.warehouseForm),s(4),j("is-invalid",((l=a.warehouseForm.get("product_id"))==null?null:l.invalid)&&((l=a.warehouseForm.get("product_id"))==null?null:l.touched)),s(3),c((h=k(29,12,a.products$))?28:-1,h),s(2),c((S=a.warehouseForm.get("product_id"))!=null&&S.invalid&&((S=a.warehouseForm.get("product_id"))!=null&&S.touched)?30:-1),s(4),j("is-invalid",((g=a.warehouseForm.get("location"))==null?null:g.invalid)&&((g=a.warehouseForm.get("location"))==null?null:g.touched)),s(),c((I=a.warehouseForm.get("location"))!=null&&I.invalid&&((I=a.warehouseForm.get("location"))!=null&&I.touched)?35:-1),s(),x("disabled",a.warehouseForm.invalid||a.isLoading),s(),c(a.isLoading?37:38)}},dependencies:[L,W,ie,J,Z,ee,H,Y,Q,z,K,X,M,A],encapsulation:2})};var Oe=[{path:"items",component:q,title:"Inventory Items"},{path:"add_items",component:b,title:"Add Items"},{path:"edit_items/:id",component:b,data:{renderMode:"client",ssr:!1},title:"Edit Items"},{path:"",redirectTo:"items",pathMatch:"full"}];export{Oe as WAREHOUSE_ROUTES};
