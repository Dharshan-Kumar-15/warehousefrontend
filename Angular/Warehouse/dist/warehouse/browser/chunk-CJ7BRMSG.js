import{a as L}from"./chunk-FYVEFPOD.js";import{a as te,b as P,c as ie,d as re,e as ne,f as oe,g as ae,h as de,i as le,j as me,k as ce,l as se,m as T,o as N,p as B}from"./chunk-5YPTTVOM.js";import{$ as t,G as K,H as a,Ia as $,K as V,Ka as E,L as y,La as k,P as f,S as w,U as M,Va as O,W as _,Xa as I,Y as D,Z as F,_ as i,aa as p,ba as h,ca as u,da as v,ea as X,g as W,ga as r,ha as s,ia as b,ka as Z,l as J,na as A,oa as q,s as m,v as g,w as x,wa as ee,ya as R,za as C}from"./chunk-S7MPL5EF.js";var U=class o{fb=m(T);apiService=m(L);authService=m(I);toastr=m(O);router=m(E);route=m($);profileForm;isLoading=!1;isEdit=!1;buyerId;currentBuyer;user=null;constructor(){this.profileForm=this.fb.group({name:["",[P.required,P.minLength(3)]],address:["",[P.required,P.minLength(10)]],phone:["",[P.required,P.pattern(/^[\d\s\-+()]{10,15}$/)]],paymentMode:["",P.required]})}logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-buyer-profile"]],decls:33,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container"],["routerLink","/buyer/profile",1,"navbar-brand"],["id","navbar-item",1,"navbar-nav"],[1,"nav-item"],[1,"nav-link","btn-primary","btn",3,"click"],[1,"container","mt-4"],[1,"row"],[1,"col-md-6"],[1,"card","mb-4"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body"],[1,"mb-3"],["routerLink","/buyer/create_orders",1,"btn","btn-info","ms-2"],["routerLink","/buyer/orders",1,"btn","btn-info","ms-2"],[1,"card"],[1,"card-header","bg-warning"],["type","button",1,"btn","btn-outline-danger","me-2",3,"click"]],template:function(e,d){e&1&&(i(0,"nav",0)(1,"div",1)(2,"a",2),r(3,"Buyer"),t(),i(4,"ul",3)(5,"li",4)(6,"a",5),u("click",function(){return d.logout()}),r(7,"Logout"),t()()()()(),i(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"h3",11),r(14,"Order Product"),t()(),i(15,"div",12)(16,"div",13)(17,"strong"),r(18,"Create Orders:"),t(),i(19,"a",14),r(20,"Create Order"),t()(),i(21,"div",13)(22,"strong"),r(23,"My Orders:"),t(),i(24,"a",15),r(25,"My Orders"),t()()()(),i(26,"div",16)(27,"div",17)(28,"h3",11),r(29,"Account Security"),t()(),i(30,"div",12)(31,"button",18),u("click",function(){return d.logout()}),r(32," Logout "),t()()()()()())},dependencies:[C,N,k],encapsulation:2})};var ue=(o,n)=>n.order_id;function ve(o,n){if(o&1){let e=h();i(0,"tr")(1,"td"),r(2),t(),i(3,"td"),r(4),t(),i(5,"td"),r(6),t(),i(7,"td"),r(8),t(),i(9,"td")(10,"span"),r(11),t()(),i(12,"td")(13,"button",16),u("click",function(){let l=g(e).$implicit,c=v(3);return x(c.viewProduct(l.order_id))}),p(14,"i",17),r(15," View "),t(),i(16,"button",18),u("click",function(){let l=g(e).$implicit,c=v(3);return x(c.deleteOrder(l.order_id))}),p(17,"i",17),r(18," Delete "),t()()()}if(o&2){let e=n.$implicit,d=v(3);a(2),s(e.order_id),a(2),s(e.orderDate),a(2),b("",e.items.length," item(s)"),a(2),s(e.totalAmount),a(2),M(d.getStatusBadgeClass(e.status)),a(),b(" ",e.status," ")}}function be(o,n){if(o&1&&(i(0,"div",12)(1,"table",14)(2,"thead",15)(3,"tr")(4,"th"),r(5,"Order "),t(),i(6,"th"),r(7,"Date"),t(),i(8,"th"),r(9,"Items"),t(),i(10,"th"),r(11,"Total"),t(),i(12,"th"),r(13,"Status"),t(),i(14,"th"),r(15,"Actions"),t()()(),i(16,"tbody"),D(17,ve,19,7,"tr",null,ue),t()()()),o&2){let e=v();a(17),F(e)}}function fe(o,n){o&1&&(i(0,"div",13),r(1," You haven't placed any orders yet. "),i(2,"a",19),r(3,"Start shopping"),t(),r(4,"! "),t())}function _e(o,n){o&1&&f(0,be,19,0,"div",12)(1,fe,5,0,"div",13),o&2&&_(n?0:1)}function ge(o,n){o&1&&p(0,"app-spinner")}var H=class o{apiService=m(L);authService=m(I);toastr=m(O);router=m(E);orders$=W([]);isLoading=!1;fb=m(T);ngOnInit(){this.loadOrders()}loadOrders(){let n=this.authService.getUserId();if(console.log("from orderList: "+n),!n){this.router.navigate(["auth/login"]);return}this.orders$=this.apiService.getBuyerByUserId(n).pipe(J(e=>{let d=e.buyer_id??0;return console.log("from orderListsasa "+d),this.apiService.getBuyerOrders(d)}))}viewProduct(n){console.log("viewProduct:",n),this.router.navigate([`buyer/order_details/${n}`])}deleteOrder(n){console.log("delete",n),this.apiService.deleteOrder(n).subscribe({next:()=>{this.toastr.success("Deleted successfully"),this.loadOrders()},error:e=>{this.toastr.error("failed to delete order item")}})}getStatusBadgeClass(n){switch(n){case"PENDING":return"badge bg-warning text-dark";case"PROCESSING":return"badge bg-info text-dark";case"SHIPPED":return"badge bg-primary";case"DELIVERED":return"badge bg-success";case"CANCELLED":return"badge bg-danger";default:return"badge bg-secondary"}}logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-order-list"]],decls:20,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container"],["routerLink","/buyer/profile",1,"navbar-brand"],["id","navbar-item",1,"navbar-nav"],[1,"nav-item"],[1,"nav-link","btn-primary","btn",3,"click"],[1,"container","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["type","button","routerLink","/buyer/create_orders",1,"btn","btn-primary"],[1,"bi","bi-plus-circle","me-2"],[1,"card"],[1,"card-body"],[1,"table-responsive"],[1,"alert","alert-info"],[1,"table","table-hover","align-middle"],[1,"table-light"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-eye"],["type","button",1,"ms-2","btn","btn-sm","btn-outline-primary",3,"click"],["routerLink","/buyer/create_orders",1,"alert-link"]],template:function(e,d){if(e&1&&(i(0,"nav",0)(1,"div",1)(2,"a",2),r(3,"Buyer"),t(),i(4,"ul",3)(5,"li",4)(6,"a",5),u("click",function(){return d.logout()}),r(7,"Logout"),t()()()()(),i(8,"div",6)(9,"div",7)(10,"h2"),r(11,"My Orders"),t(),i(12,"button",8),p(13,"i",9),r(14,"Place New Order "),t()(),i(15,"div",10)(16,"div",11),f(17,_e,2,1),A(18,"async"),f(19,ge,1,0,"app-spinner"),t()()()),e&2){let l;a(17),_((l=q(18,1,d.orders$))?17:19,l)}},dependencies:[C,R,N,B,k],encapsulation:2})};var xe=(o,n)=>n.product_id,Se=(o,n)=>n.product.product_id;function ye(o,n){if(o&1&&(i(0,"option",30),r(1),t()),o&2){let e=n.$implicit;w("value",e.product_id)("disabled",e.product_stocks<=0),a(),Z(" ",e.product_id," Name: ",e.product_name," Price: ",e.product_price," (",e.product_stocks," in stock) ")}}function he(o,n){o&1&&D(0,ye,2,6,"option",30,xe),o&2&&F(n)}function Ce(o,n){o&1&&(i(0,"div",24),r(1,"Minimum quantity is 1"),t())}function Ee(o,n){if(o&1){let e=h();i(0,"tr")(1,"td"),r(2),t(),i(3,"td"),r(4),t(),i(5,"td"),r(6),t(),i(7,"td"),r(8),t(),i(9,"td",38)(10,"button",39),u("click",function(){let l=g(e).$index,c=v(2);return x(c.removeProduct(l))}),r(11," remove "),t()()()}if(o&2){let e=n.$implicit;a(2),s(e.product.product_name),a(2),s(e.product.product_price),a(2),s(e.quantity),a(2),s(e.product.product_price*e.quantity)}}function ke(o,n){o&1&&p(0,"app-spinner")}function Oe(o,n){o&1&&(p(0,"i",40),r(1,"Place Order "))}function Ie(o,n){if(o&1){let e=h();i(0,"div",31)(1,"table",32)(2,"thead")(3,"tr")(4,"th"),r(5,"Product"),t(),i(6,"th"),r(7,"Price"),t(),i(8,"th"),r(9,"Quantity"),t(),i(10,"th"),r(11,"Subtotal"),t(),p(12,"th"),t()(),i(13,"tbody"),D(14,Ee,12,4,"tr",null,Se),t(),i(16,"tfoot",33)(17,"tr")(18,"th",34),r(19,"Total"),t(),i(20,"th",35),r(21),t()()()()(),i(22,"div",36)(23,"button",37),u("click",function(){g(e);let l=v();return x(l.submitOrder())}),f(24,ke,1,0,"app-spinner")(25,Oe,2,0),t()()}if(o&2){let e=v();a(14),F(e.selectedProducts),a(7),b(" ",e.getTotal(),""),a(2),w("disabled",e.isLoading),a(),_(e.isLoading?24:25)}}function Pe(o,n){o&1&&(i(0,"div",29),r(1," No products added yet. Select products from the left panel to add to your order. "),t())}var Q=class o{fb=m(T);apiService=m(L);authService=m(I);router=m(E);toastr=m(O);orderForm=this.fb.group({productId:[0],quantity:[0,[P.min(1)]]});products$=this.apiService.getProducts();selectedProducts=[];isLoading=!1;addProduct(){let n=this.orderForm.value.productId??0,e=this.orderForm.value.quantity??0;console.log("ID: add:"+n),this.products$.subscribe(d=>{console.log("Available products: ",d);let l=d.find(c=>c.product_id===+n);if(console.log("Selected product ",l),l){if(l.product_stocks<e){this.toastr.warning(`Only${l.product_stocks}items available in stock`);return}let c=this.selectedProducts.find(S=>S.product.product_id===n);c?c.quantity+=e:this.selectedProducts.push({product:l,quantity:e}),this.orderForm.get("quantity")?.reset()}else console.log("error in add product")}),this.orderForm.get("productId")?.invalid||this.orderForm.get("quantity")?.invalid}removeProduct(n){this.selectedProducts.splice(n,1)}getTotal(){return this.selectedProducts.reduce((n,e)=>n+e.product.product_price*e.quantity,0)}submitOrder(){if(this.selectedProducts.length===0){this.toastr.warning("Please add at least one product to the order");return}this.isLoading=!0;let n=this.authService.getUserId();if(console.log("Order form:"+n),!n){this.toastr.error("User not Authenticated"),this.isLoading=!1;return}this.apiService.getBuyerByUserId(n).subscribe({next:e=>{if(console.log("buyer Ids",e.buyer_id),!e){this.toastr.warning("Please complete your profile before placing  an order"),this.router.navigate(["/buyer/profile"]),this.isLoading=!1;return}let d=this.orderForm.value.productId;console.log("from order form:"+d),this.apiService.getProductId(d).subscribe({next:l=>{let c={buyer:e,items:this.selectedProducts.map(S=>({product:l,quantity:S.quantity,price:S.product.product_price}))};console.log("orders: from order form ",c),this.apiService.createOrder(c).subscribe({next:()=>{this.toastr.success("Order placed successfully!"),this.router.navigate(["/buyer/orders"])},error:S=>{this.toastr.error("Failed to place order"),this.isLoading=!1}})},error:l=>{this.toastr.error(l.error?.message||"Failed to load buyer profile"),this.isLoading=!1}})}})}logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-order-form"]],decls:51,vars:7,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container"],["routerLink","/buyer/profile",1,"navbar-brand"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","/buyer/products",1,"nav-link","active"],["routerLink","/buyer/products",1,"nav-link","text-white"],["id","navbar-item",1,"navbar-nav"],[1,"nav-link","btn-primary","btn",3,"click"],[1,"container","mt-4"],[1,"row"],[1,"col-md-6"],[1,"col","mb-4"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body"],[3,"formGroup"],[1,"mb-3"],["for","productId",1,"form-label","me-2","mt-2"],["formControlName","productId","id","productId",1,"form-select"],["value",""],["for","quantity",1,"form-label"],["type","number","formControlName","quantity","min","1","id","quantity",1,"form-control"],[1,"text-danger"],["type","button",1,"btn","btn-outline-primary",3,"click","disabled"],[1,"bi","bi-plus-circle","me-2"],[1,"card","mb-4"],[1,"card-header","bg-success","text-white"],[1,"alert","alert-info"],[3,"value","disabled"],[1,"table-responsive"],[1,"table"],[1,"table-group-divider"],["colspan","3"],["colspan","2"],[1,"d-grid","mt-3"],["type","button",1,"btn","btn-primary","btn-lg",3,"click","disabled"],[1,"text-end"],["type","button",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-check-circle","me-2"]],template:function(e,d){if(e&1&&(i(0,"nav",0)(1,"div",1)(2,"a",2),r(3,"Buyer"),t(),i(4,"div",3)(5,"ul",4)(6,"li",5)(7,"a",6),r(8,"Home"),t()(),i(9,"li",5)(10,"a",7),r(11,"Products"),t()()()(),i(12,"ul",8)(13,"li",5)(14,"a",9),u("click",function(){return d.logout()}),r(15,"Logout"),t()()()()(),i(16,"div",10)(17,"h2"),r(18,"Create New Order"),t(),i(19,"div",11)(20,"div",12)(21,"div",13)(22,"div",14)(23,"h3",15),r(24,"Add Products"),t()(),i(25,"div",16)(26,"form",17)(27,"div",18)(28,"label",19),r(29,"Select Product"),t(),i(30,"select",20)(31,"option",21),r(32,"Choose a Product"),t(),f(33,he,2,0),A(34,"async"),t()(),i(35,"div",18)(36,"label",22),r(37,"Quantity"),t(),p(38,"input",23),f(39,Ce,2,0,"div",24),t(),i(40,"button",25),u("click",function(){return d.addProduct()}),p(41,"i",26),r(42,"Add to Order "),t()()()()(),i(43,"div",12)(44,"div",27)(45,"div",28)(46,"h3"),r(47,"Order Summary"),t()(),i(48,"div",16),f(49,Ie,26,3)(50,Pe,2,0,"div",29),t()()()()()),e&2){let l,c,S;a(26),w("formGroup",d.orderForm),a(7),_((l=q(34,5,d.products$))?33:-1,l),a(6),_((c=d.orderForm.get("quantity"))!=null&&c.invalid&&((c=d.orderForm.get("quantity"))!=null&&c.touched)?39:-1),a(),w("disabled",!((S=d.orderForm.get("productId"))!=null&&S.value)||((S=d.orderForm.get("quantity"))==null?null:S.invalid)),a(9),_(d.selectedProducts.length>0?49:50)}},dependencies:[C,R,N,ne,me,ce,te,oe,le,ie,re,se,ae,de,B,k],encapsulation:2})};var Le=(o,n)=>n.product.product_id;function we(o,n){o&1&&p(0,"app-spinner")}function De(o,n){if(o&1){let e=h();i(0,"tr")(1,"td")(2,"div",30),r(3),t()(),i(4,"td"),r(5),t(),i(6,"td"),r(7),t(),i(8,"td"),r(9),t(),i(10,"td"),r(11),t(),i(12,"td")(13,"button",31),u("click",function(){let l=g(e).$implicit,c=v(2);return x(c.deleteOrder(l.orderItemId))}),r(14,"Delete"),t()()()}if(o&2){let e=n.$implicit;a(3),b(" ",e.product.product_name," "),a(2),s(e.price),a(2),s(e.quantity),a(2),s(e.price*e.quantity),a(2),s(e.orderItemId)}}function Fe(o,n){if(o&1&&(i(0,"p",25)(1,"strong"),r(2,"Tracking: "),t(),r(3),t()),o&2){let e=v(3);a(3),b(" ",e.order.transportation.trackingNumber," ")}}function Te(o,n){if(o&1&&(i(0,"p",25)(1,"strong"),r(2,"Est. Delivery"),t(),r(3),t()),o&2){let e=v(3);a(3),b(" ",e.order.transportation.estimatedDelivery," ")}}function Ne(o,n){if(o&1&&(p(0,"hr"),i(1,"h5"),r(2,"Shipping Details"),t(),i(3,"p",25)(4,"strong"),r(5,"Method:"),t(),r(6),t(),i(7,"p",25)(8,"strong"),r(9,"Status:"),t(),i(10,"span"),r(11),t()(),f(12,Fe,4,1,"p",25)(13,Te,4,1,"p",25)),o&2){let e=v(2);a(6),b(" ",e.order.transportation.method," "),a(4),M(e.getStatusBadgeClass(e.order.transportation.status)),a(),b(" ",e.order.transportation.status,""),a(),_(e.order.transportation.trackingNumber?12:-1),a(),_(e.order.transportation.estimatedDelivery?13:-1)}}function Be(o,n){if(o&1){let e=h();i(0,"button",32),u("click",function(){g(e);let l=v(2);return x(l.deleteOrder(l.order.order_id))}),p(1,"i",33),r(2,"Cancel Order "),t()}}function Me(o,n){if(o&1&&(i(0,"div",12)(1,"h2"),r(2),t(),i(3,"span"),r(4),t()(),i(5,"div",13)(6,"div",14)(7,"div",15)(8,"div",16)(9,"h3",17),r(10,"Order Items"),t()(),i(11,"div",18)(12,"div",19)(13,"table",20)(14,"thead")(15,"tr")(16,"th"),r(17,"Product"),t(),i(18,"th"),r(19,"Price"),t(),i(20,"th"),r(21,"Quantity"),t(),i(22,"th"),r(23,"Subtotal"),t(),i(24,"th"),r(25,"ID"),t(),i(26,"th"),r(27,"Delete"),t()()(),i(28,"tbody"),D(29,De,15,5,"tr",null,Le),t(),i(31,"tfoot",21)(32,"tr")(33,"th",22),r(34,"Total"),t(),i(35,"th"),r(36),t()()()()()()()(),i(37,"div",23)(38,"div",15)(39,"div",24)(40,"h3",17),r(41," Shipping Information"),t()(),i(42,"div",18)(43,"h5"),r(44),t(),i(45,"p",25),r(46),t(),i(47,"p",25),r(48),t(),i(49,"p"),r(50),t(),f(51,Ne,14,6),t()(),i(52,"div",26)(53,"button",27),p(54,"i",28),r(55,"Back to Orders "),t(),f(56,Be,3,0,"button",29),t()()()),o&2){let e=v();a(2),b("Order ",e.order.order_id,""),a(),M(e.getStatusBadgeClass(e.order.status)),a(),b(" ",e.order.status," "),a(25),F(e.order.items),a(7),s(e.order.totalAmount),a(8),s(e.order.buyer.name),a(2),s(e.order.buyer.address),a(2),b("Phone:",e.order.buyer.phone,""),a(2),b("Payment: ",e.order.buyer.paymentMode,""),a(),_(e.order.transportation?51:-1),a(5),_(e.order.status==="PENDING"?56:-1)}}function Ve(o,n){o&1&&(i(0,"div",11),r(1," Order not found. "),i(2,"a",34),r(3,"View your orders"),t()())}var Y=class o{route=m($);apiService=m(L);authService=m(I);toastr=m(O);router=m(E);order=null;isLoading=!1;ngOnInit(){let n=this.route.snapshot.params.id;console.log("orderId: from order details",n),this.loadOrderDetails(n)}loadOrderDetails(n){this.isLoading=!0,console.log("from order details"),this.apiService.getOrderDetails(n).subscribe({next:e=>{this.order=e,this.isLoading=!1},error:e=>{this.toastr.error(e.error?.message||"Failed to load order details"),this.isLoading=!1}})}getStatusBadgeClass(n){switch(n){case"PENDING":return"badge bg-warning text-dark";case"PROCESSING":return"badge bg-info text-dark";case"SHIPPED":return"badge bg-primary";case"DELIVERED":return"badge bg-success";case"CANCELLED":return"badge bg-danger";default:return"badge bg-secondary"}}deleteOrder(n){console.log("delete details:",n),this.apiService.getOrderItemId(n).subscribe({next:e=>{console.log("items ulla pothu",e),this.apiService.deleteOrder(e.orderItemId).subscribe({next:()=>{this.toastr.success("Deleted successfully"),this.ngOnInit()},error:d=>{this.toastr.error("failed to delete order item")}})},error:e=>{this.toastr.error("failed to delete order item")}})}logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-order-details"]],decls:23,vars:1,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container"],["routerLink","/buyer/profile",1,"navbar-brand"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","/buyer/products",1,"nav-link","active"],["routerLink","/buyer/products",1,"nav-link","text-white"],["routerLink","/buyer/create_orders",1,"nav-link","text-white"],["id","navbar-item",1,"navbar-nav"],[1,"nav-link","btn-primary","btn",3,"click"],[1,"alert","alert-danger"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"row"],[1,"col-md-8"],[1,"card","mb-4"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body"],[1,"table-responsive"],[1,"table"],[1,"table-group-divider"],["colspan","3"],[1,"col-md-4"],[1,"card-header","bg-info","text-white"],[1,"mb-1"],[1,"d-grid","gap-2"],["type","button","routerLink","/buyer/orders",1,"btn","btn-outline-secondary"],[1,"bi","bi-arrow-left","me-2"],["type","button",1,"btn","btn-outline-danger"],[1,"d-flex","align-items-center"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-x-circle","me-2"],["routerLink","/buyer/orders",1,"alert-link"]],template:function(e,d){e&1&&(i(0,"nav",0)(1,"div",1)(2,"a",2),r(3,"Buyer file"),t(),i(4,"div",3)(5,"ul",4)(6,"li",5)(7,"a",6),r(8,"Home"),t()(),i(9,"li",5)(10,"a",7),r(11,"Products"),t()(),i(12,"li",5)(13,"a",8),r(14,"Add Products"),t()()()(),i(15,"ul",9)(16,"li",5)(17,"a",10),u("click",function(){return d.logout()}),r(18,"Logout"),t()()()()(),i(19,"div",1),f(20,we,1,0,"app-spinner")(21,Me,57,11)(22,Ve,4,0,"div",11),t()),e&2&&(a(20),_(d.isLoading?20:d.order?21:22))},dependencies:[C,B,k],encapsulation:2})};function Ae(o,n){if(o&1){let e=h();i(0,"div",15)(1,"div",16)(2,"div"),p(3,"img",17),i(4,"div",18)(5,"h3",19),r(6),t(),i(7,"p",20),r(8),t(),i(9,"p",21),r(10),t(),i(11,"p",22),r(12),t(),i(13,"div")(14,"button",23),u("click",function(){g(e);let l=v();return x(l.buyProduct())}),r(15,"BUY NOW"),t()()()()()()}if(o&2){let e=n.$implicit,d=v();a(3),X("alt",e.product_name),w("src",d.getImageUrl(e),K),a(3),s(e.product_name),a(2),s(e.product_Desc),a(2),b("Price: ",e.product_price,""),a(2),b("Stock: ",e.product_stocks,"")}}var z=class o{constructor(n,e,d){this.router=n;this.toastr=e;this.authService=d}apiService=m(L);products=[];ngOnInit(){this.getProduct()}getProduct(){this.apiService.getProducts().subscribe({next:n=>{this.products=n},error:n=>{this.toastr.error("Failed to get Product"),console.error("failed to get product")}})}buyProduct(){this.router.navigate(["buyer/create_orders"])}getImageUrl(n){return n.image_data?`data:${n.image_type};base64,${n.image_data}`:"public/truck.jpg"}logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||o)(V(E),V(O),V(I))};static \u0275cmp=y({type:o,selectors:[["app-buyer-products"]],decls:21,vars:1,consts:[[1,"navbar","navbar-expand-lg","bg-warning"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","/buyer/products",1,"nav-link","active"],["routerLink","/buyer/create_orders",1,"nav-link","text-black"],[1,"d-flex","justify-content-end","align-items-end","me-5"],[1,"btn","btn-danger",2,"cursor","pointer",3,"click"],[1,"container","my-4"],[1,"row"],["class","col-3 mb-3",4,"ngFor","ngForOf"],[1,"col-3","mb-3"],[1,"card",2,"width","18rem"],["height","288px","width","288px",1,"card-image-top",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-text","text-danger"],[1,"card-text","fw-bold","text-primary"],[1,"card-text","fw-bold","text-success"],["type","button",1,"btn","btn-success","me-3",3,"click"]],template:function(e,d){e&1&&(i(0,"nav",0)(1,"div",1)(2,"a",2),r(3,"Buyer"),t(),i(4,"button",3),p(5,"span",4),t(),i(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),r(10,"Home"),t()(),i(11,"li",7)(12,"a",9),r(13,"Buy Products"),t()()()(),i(14,"div",10)(15,"a",11),u("click",function(){return d.logout()}),r(16,"Logout"),t()()()(),i(17,"section")(18,"div",12)(19,"div",13),f(20,Ae,16,6,"div",14),t()()()),e&2&&(a(20),w("ngForOf",d.products))},dependencies:[C,ee,k],encapsulation:2})};var Yt=[{path:"profile",component:U,title:"My Profile"},{path:"products",component:z,title:"Products"},{path:"orders",component:H,title:"My Orders"},{path:"create_orders",component:Q,title:"Create Order"},{path:"order_details/:id",component:Y,data:{renderMode:"client",ssr:!1},title:"Order Details"},{path:"",redirectTo:"products",pathMatch:"full"}];export{Yt as BUYER_ROUTES};
