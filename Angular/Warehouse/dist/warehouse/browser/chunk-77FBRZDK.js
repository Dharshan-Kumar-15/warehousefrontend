import{a as O,b as v,c as N,d as P,e as M,g as I,h as U,i as z,j as J,k as K,m as q,n as Q,o as j,p as D}from"./chunk-5YPTTVOM.js";import{$ as i,H as l,K as b,Ka as w,L as k,La as T,P as s,S as c,T as S,Va as L,W as d,Xa as A,_ as t,aa as u,ba as H,ca as C,da as _,ga as o,ia as Y,ma as h,s as R,v as V,w as W,za as y}from"./chunk-S7MPL5EF.js";var re=()=>["/auth/login"],X=()=>["/auth/register"];function oe(n,a){n&1&&(t(0,"div"),o(1,"Username is required"),i())}function le(n,a){if(n&1&&(t(0,"div",19),s(1,oe,2,0,"div"),i()),n&2){let r,e=_();l(),d(!((r=e.loginForm.get("username"))==null||r.errors==null)&&r.errors.required?1:-1)}}function ae(n,a){n&1&&(t(0,"div"),o(1,"Password is required"),i())}function me(n,a){if(n&1&&(t(0,"div",19),s(1,ae,2,0,"div"),i()),n&2){let r,e=_();l(),d(!((r=e.loginForm.get("password"))==null||r.errors==null)&&r.errors.required?1:-1)}}function de(n,a){n&1&&u(0,"app-spinner")}function se(n,a){n&1&&o(0," Login ")}var G=class n{constructor(a,r,e){this.fb=a;this.router=r;this.toastr=e}loginForm;authService=R(A);ngOnInit(){this.loginForm=this.fb.group({username:["",v.required],password:["",v.required]})}onSubmit(){let{username:a,password:r}=this.loginForm.value;this.authService.login(a,r).subscribe({next:()=>{let e=this.authService.getUserRole();switch(console.log("Roles:"+e),console.log(e),e){case"ROLE_ADMIN":console.log("Admin login...."),this.router.navigate(["admin/products"]),console.log("Admin after naviage....");break;case"ROLE_WAREHOUSE":this.router.navigate(["warehouse/items"]);break;case"ROLE_TRANSPORTATION":this.router.navigate(["transport/shipments"]);break;case"ROLE_BUYER":this.router.navigate(["/buyer/products"]);break;default:this.router.navigate(["auth/login"]);break}},error:e=>{this.toastr.error(e,"Login Failed")}}),this.loginForm.reset()}logout(){this.authService.logout()}static \u0275fac=function(r){return new(r||n)(b(q),b(w),b(L))};static \u0275cmp=k({type:n,selectors:[["app-auth"]],decls:38,vars:15,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container"],["routerLink","/",1,"navbar-brand"],["id","navbar-item",1,"navbar-nav"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link","btn-primary","btn",3,"routerLink"],["routerLinkActive","active",1,"nav-link","btn","btn-warning","text-white",3,"routerLink"],[1,"vh-100","bg-secondary"],[1,"container","py-5","h-100"],[1,"text-warning","fw-bold"],[1,"row","d-flex","align-items-center","justify-content-center","h-100"],[1,"col-md-8","col-lg-7","col-xl-6"],["src","/Inventory-management.png","width","700px","height","400px","alt","LorryImage"],["id","login-bg",1,"col-md-7","col-lg-5","col-xl-4","offset-xl-1","rounded-3"],["id","login",1,"text-center","h1","fw-bold","mb-5","mx-1","mx-md-5","mt-4"],[3,"ngSubmit","formGroup"],["data-mdb-input-init","",1,"form-outline","mb-4"],["type","text","id","username","formControlName","username",1,"form-control","form-control-lg"],["for","username",1,"form-label"],[1,"text-danger"],["type","password","formControlName","password","id","password",1,"form-control","form-control-lg"],["for","password"],[1,"d-flex","justify-content-around","align-items-center","mb-4"],["type","submit","data-mdb-button-init","","data-mdb-ripple-init","","id","button-bg",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled"],["id","sign-bg",1,"btn","btn-lg","btn-warning",3,"routerLink"]],template:function(r,e){if(r&1&&(t(0,"nav",0)(1,"div",1)(2,"a",2),o(3,"Inventory Management"),i(),t(4,"ul",3)(5,"li",4)(6,"a",5),o(7,"Login"),i()(),t(8,"li",4)(9,"a",6),o(10,"Register"),i()()()()(),t(11,"section",7)(12,"div",8)(13,"h2",9),o(14,"Welcome to Inventory Management System"),i(),t(15,"div",10)(16,"div",11),u(17,"img",12),i(),t(18,"div",13)(19,"p",14),o(20,"Login"),i(),t(21,"form",15),C("ngSubmit",function(){return e.onSubmit()}),t(22,"div",16),u(23,"input",17),t(24,"label",18),o(25,"User Name"),i(),s(26,le,2,1,"div",19),i(),t(27,"div",16),u(28,"input",20),t(29,"label",21),o(30,"Password"),i(),s(31,me,2,1,"div",19),i(),t(32,"div",22)(33,"button",23),s(34,de,1,0,"app-spinner")(35,se,1,0),i(),t(36,"a",24),o(37,"SignUp"),i()()()()()()()),r&2){let m,p,g,f;l(6),c("routerLink",h(12,re)),l(3),c("routerLink",h(13,X)),l(12),c("formGroup",e.loginForm),l(2),S("is-invalid",((m=e.loginForm.get("username"))==null?null:m.invalid)&&((m=e.loginForm.get("username"))==null?null:m.touched)),l(3),d((p=e.loginForm.get("username"))!=null&&p.invalid&&((p=e.loginForm.get("username"))!=null&&p.touched)?26:-1),l(2),S("is-invalid",((g=e.loginForm.get("password"))==null?null:g.invalid)&&((g=e.loginForm.get("password"))==null?null:g.touched)),l(3),d((f=e.loginForm.get("password"))!=null&&f.invalid&&((f=e.loginForm.get("password"))!=null&&f.touched)?31:-1),l(2),c("disabled",e.loginForm.invalid||e.authService.isLoading()),l(),d(e.authService.isLoading()?34:35),l(2),c("routerLink",h(14,X))}},dependencies:[Q,M,O,N,P,y,j,I,U,T,D],styles:["#login-bg[_ngcontent-%COMP%]{background-color:#87cefa}#login[_ngcontent-%COMP%]:hover{color:#8a2be2}#button-bg[_ngcontent-%COMP%]{background-color:transparent;color:#000}#button-bg[_ngcontent-%COMP%]:hover{background-color:#0e3aecea;color:#fff}#sign-bg[_ngcontent-%COMP%]{background-color:transparent}#sign-bg[_ngcontent-%COMP%]:hover{background-color:gold}"]})};var Z=()=>["/auth/login"],ue=()=>["/auth/register"];function ce(n,a){if(n&1){let r=H();t(0,"li",39)(1,"span",40),o(2),i()(),t(3,"li",41)(4,"a",42),C("click",function(){V(r);let m=_();return W(m.logout())}),o(5,"Logout"),i()()}if(n&2){let r,e=_();l(2),Y("Welcome, ",(r=e.authService.currentUser())==null?null:r.username,"")}}function pe(n,a){n&1&&(t(0,"li",39)(1,"a",43),o(2,"Login"),i()(),t(3,"li",39)(4,"a",44),o(5,"Register"),i()()),n&2&&(l(),c("routerLink",h(2,Z)),l(3),c("routerLink",h(3,ue)))}function ge(n,a){n&1&&(t(0,"div",45),o(1,"Username is required"),i())}function ve(n,a){n&1&&(t(0,"div"),o(1,"Username must be at least 3 characters"),i())}function fe(n,a){if(n&1&&(t(0,"div",19),s(1,ge,2,0,"div",45)(2,ve,2,0,"div"),i()),n&2){let r,e,m=_();l(),d(!((r=m.registerForm.get("username"))==null||r.errors==null)&&r.errors.required?1:-1),l(),d(!((e=m.registerForm.get("username"))==null||e.errors==null)&&e.errors.minlength?2:-1)}}function _e(n,a){n&1&&(t(0,"div"),o(1,"Email is required"),i())}function be(n,a){n&1&&(t(0,"div"),o(1,"Please enter a valid email"),i())}function he(n,a){if(n&1&&(t(0,"div",19),s(1,_e,2,0,"div")(2,be,2,0,"div"),i()),n&2){let r,e,m=_();l(),d(!((r=m.registerForm.get("email"))==null||r.errors==null)&&r.errors.required?1:-1),l(),d(!((e=m.registerForm.get("email"))==null||e.errors==null)&&e.errors.email?2:-1)}}function Se(n,a){n&1&&(t(0,"div"),o(1,"Password is required"),i())}function Ce(n,a){n&1&&(t(0,"div"),o(1,"Password must be at least 6 characters"),i())}function xe(n,a){if(n&1&&(t(0,"div",26),s(1,Se,2,0,"div")(2,Ce,2,0,"div"),i()),n&2){let r,e,m=_();l(),d(!((r=m.registerForm.get("password"))==null||r.errors==null)&&r.errors.required?1:-1),l(),d(!((e=m.registerForm.get("password"))==null||e.errors==null)&&e.errors.minlength?2:-1)}}function Fe(n,a){n&1&&(t(0,"div",26)(1,"div",19),o(2,"Please select Account Type"),i()())}function Ee(n,a){n&1&&u(0,"app-spinner")}function Re(n,a){n&1&&o(0," Create Account ")}var B=class n{constructor(a,r,e){this.fb=a;this.router=r;this.toastr=e}registerForm;authService=R(A);ngOnInit(){this.registerForm=this.fb.group({username:["",[v.required,v.minLength(3)]],email:["",[v.required,v.email]],password:["",[v.required,v.minLength(5)]],role:["BUYER"]})}onSubmit(){let{username:a,email:r,password:e,role:m}=this.registerForm.value,p=[m];this.authService.register(a,r,e,p).subscribe({next:()=>{this.toastr.success("Registration Successful! Please Login."),this.registerForm.reset(),this.router.navigate(["/auth/login"])},error:g=>{this.toastr.error(g.error?.message||"Registration Failed")}}),this.registerForm.invalid}logout(){this.authService.logout()}static \u0275fac=function(r){return new(r||n)(b(q),b(w),b(L))};static \u0275cmp=k({type:n,selectors:[["app-register"]],decls:66,vars:16,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container"],["routerLink","/",1,"navbar-brand"],["id","navbar-item",1,"navbar-nav"],[1,"vh-100","bg-secondary"],[1,"container","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-lg-12","col-xl-11"],[1,"card","text-black","bg-secondary",2,"border-radius","25px"],[1,"card-body","p-md-5"],[1,"row","justify-content-center"],["id","box",1,"col-lg-6","col-md-10","col-xl-5","order-2","order-lg-1","rounded-3"],["id","signup",1,"text-center","h1","fw-bold","mb-5","mx-1","mx-md-4","mt-4"],[1,"mx-1","mx-md-4",3,"ngSubmit","formGroup"],[1,"d-flex","flex-row","align-items-center","mb-4"],[1,"fas","fa-user","fa-lg","me-3","fa-fw"],["data-mdb-input-init","",1,"form-outline","flex-fill","mb-0"],["type","text","formControlName","username","id","username","placeholder","Enter your username",1,"form-control"],["for","username",1,"form-label"],[1,"text-danger"],[1,"fas","fa-envelope","fa-lg","me-3","fa-fw"],["type","email","formControlName","email","id","email","placeholder","Enter your email",1,"form-control"],["for","email",1,"form-label"],[1,"fas","fa-lock","fa-lg","me-3","fa-fw"],["type","password","formControlName","password","id","password","placeholder","Enter your password",1,"form-control"],["for","password",1,"form-label"],[1,"invalid-feedback"],["data-mdb-select-init","","formControlName","role","id","role",1,"form-select"],["value","","disabled","","selected",""],["value","BUYER"],["value","ADMIN"],["value","WAREHOUSE"],["value","TRANSPORTATION"],["for","role",1,"form-label"],["type","submit","id","sign-bg",1,"btn","btn-block","btn-primary",3,"disabled"],[1,"text-center","mt-3"],["id","login-bg",1,"btn","btn-secondary",3,"routerLink"],[1,"col-md-10","col-lg-6","col-xl-7","d-flex","align-items-center","order-1","order-lg-2"],["src","/truck.jpg","alt","Truck image",1,"img-fluid"],[1,"nav-item"],[1,"nav-link"],[1,"nav-item","border","bg-danger","rounded-3","ps-2","pe-2"],[1,"nav-link",2,"cursor","pointer",3,"click"],[1,"nav-link","btn-primary","btn",3,"routerLink"],[1,"nav-link","btn","btn-warning","text-white",3,"routerLink"],[1,""]],template:function(r,e){if(r&1&&(t(0,"nav",0)(1,"div",1)(2,"a",2),o(3,"Inventory Management"),i(),t(4,"ul",3),s(5,ce,6,1)(6,pe,6,4),i()()(),t(7,"section",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"p",12),o(16," SignUp"),i(),t(17,"form",13),C("ngSubmit",function(){return e.onSubmit()}),t(18,"div",14),u(19,"i",15),t(20,"div",16),u(21,"input",17),t(22,"label",18),o(23,"UserName"),i(),s(24,fe,3,2,"div",19),i()(),t(25,"div",14),u(26,"i",20),t(27,"div",16),u(28,"input",21),t(29,"label",22),o(30,"Email"),i(),s(31,he,3,2,"div",19),i()(),t(32,"div",14),u(33,"i",23),t(34,"div",16),u(35,"input",24),t(36,"label",25),o(37,"Password"),i(),s(38,xe,3,2,"div",26),i()(),t(39,"div",14),u(40,"i",23),t(41,"div",16)(42,"select",27)(43,"option",28),o(44,"Select your account type"),i(),t(45,"option",29),o(46,"BUYER"),i(),t(47,"option",30),o(48,"ADMIN"),i(),t(49,"option",31),o(50,"WAREHOUSE"),i(),t(51,"option",32),o(52,"TRANSPORTATION"),i()(),t(53,"label",33),o(54,"Account Type"),i(),s(55,Fe,3,0,"div",26),i()(),t(56,"button",34),s(57,Ee,1,0,"app-spinner")(58,Re,1,0),i()(),t(59,"div",35)(60,"p"),o(61,"Already have an account? "),t(62,"a",36),o(63,"Login"),i()()()(),t(64,"div",37),u(65,"img",38),i()()()()()()()()),r&2){let m,p,g,f,x,F,E;l(5),d(e.authService.currentUser()?5:6),l(12),c("formGroup",e.registerForm),l(4),S("is-invalid",((m=e.registerForm.get("username"))==null?null:m.invalid)&&((m=e.registerForm.get("username"))==null?null:m.touched)),l(3),d((p=e.registerForm.get("username"))!=null&&p.invalid&&((p=e.registerForm.get("username"))!=null&&p.touched)?24:-1),l(4),S("is-invalid",((g=e.registerForm.get("email"))==null?null:g.invalid)&&((g=e.registerForm.get("email"))==null?null:g.touched)),l(3),d((f=e.registerForm.get("email"))!=null&&f.invalid&&((f=e.registerForm.get("email"))!=null&&f.touched)?31:-1),l(4),S("is-invalid",((x=e.registerForm.get("password"))==null?null:x.invalid)&&((x=e.registerForm.get("password"))==null?null:x.touched)),l(3),d((F=e.registerForm.get("password"))!=null&&F.invalid&&((F=e.registerForm.get("password"))!=null&&F.touched)?38:-1),l(17),d((E=e.registerForm.get("role"))!=null&&E.invalid&&((E=e.registerForm.get("role"))!=null&&E.touched)?55:-1),l(),c("disabled",e.registerForm.invalid||e.authService.isLoading()),l(),d(e.authService.isLoading()?57:58),l(5),c("routerLink",h(15,Z))}},dependencies:[y,j,M,J,K,O,z,N,P,I,U,T,D],styles:["#box[_ngcontent-%COMP%]{background-color:#79a2bcea}#card-item[_ngcontent-%COMP%]{background-color:#789}#login-bg[_ngcontent-%COMP%]{background-color:transparent;color:#000}#login-bg[_ngcontent-%COMP%]:hover{background-color:#2929dfe2;color:#fff}#sign-bg[_ngcontent-%COMP%]{background-color:transparent;color:#000}#sign-bg[_ngcontent-%COMP%]:hover{background-color:gold}#signup[_ngcontent-%COMP%]:hover{color:#00f}"]})};var et=[{path:"login",component:G,title:"Login Page"},{path:"register",component:B,title:"Register Page"},{path:"",redirectTo:"login",pathMatch:"full"}];export{et as AUTH_ROUTES};
